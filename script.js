console.log("script.js loaded");

// Глобальная переменная для хранения текущего раздела инвентаря
let currentInventoryTab = "weapons";

// Данные NPC
const npcData = {
  "Староста Лем": {
    text: "Наш гонец ушёл с письмом к соседнему поселению, но так и не вернулся. Он не из тех, кто задерживается без причины... Пожалуйста, разыщи его. Я боюсь худшего.",
    desc: "Мудрый глава деревни, чьи глаза хранят тревогу за свой народ.",
    image: "Images/npc/oldman.jpg"
  },
  "Кузнец Бран": {
    text: "Без хорошего угля я не смогу ковать ни меча, ни подкову. Шахта к югу опустела, но уголь там всё ещё есть. Добудь немного — и я отблагодарю.",
    desc: "Грубый, но мастеровитый кузнец, чьи руки создают оружие легенд.",
    image: "Images/npc/blacksmith.jpg"
  },
  "Охотница Элира": {
    text: "Я нашла следы — крупные, с кровью. Это не волк. Что-то убивает зверей и пугает лес. Я иду на охоту. Не хочешь пойти со мной? Вдвоём у нас больше шансов.",
    desc: "Ловкая следопытка, чьё сердце принадлежит дикому лесу.",
    image: "Images/npc/hunter.jpg"
  },
  "Рыбак Нор": {
    text: "Я видел его — огромный, с усами, как у старого мудреца. Сомавр снова в пруду. Никто не может его вытащить. А ты попробуй... вдруг повезёт?",
    desc: "Седой рыбак, знающий тайны реки и её духов.",
    image: "Images/npc/fisherman.jpg"
  },
  "Мудрая жаба": {
    text: "Пей больше воды и высыпайся.",
    desc: "Она знает больше, чем кажется, и всегда говорит по делу.",
    image: "Images/npc/toad.jpg"
  },
  "Страж Ролан": {
    text: "Я на посту каждую ночь, и всё чаще слышу шаги наверху, когда башня должна быть пуста... Проверь это за меня. Я не могу уйти с поста.",
    desc: "Суровый воин, верный своему долгу охранять башню.",
    image: "Images/npc/guard.jpg"
  },
  "Старец Вейн": {
    text: "Заклятие рассыпается, как песок сквозь пальцы... Мне нужна одна старая книга. Её хранят руины на востоке. Опасное место, но ты справишься. Я чувствую это.",
    desc: "Хранитель озёрных легенд, чей взор устремлён в глубины.",
    image: "Images/npc/elder.jpg"
  },
  "Скиталец Кайр": {
    text: "Люди исчезают на старом тракте. Без шума, без следа. Я слышу шорохи в ночи, не похожие на зверей. Пройди по той дороге... но будь готов к теням.",
    desc: "Бродяга с острым умом, знающий каждый уголок каньона.",
    image: "Images/npc/wanderer.jpg"
  },
  "Комендант Рейн": {
    text: "Кто-то из моих стражей что-то скрывает. Я вижу взгляды, слышу шёпоты. Мне нужен тот, кому я могу доверять. Помоги мне выяснить правду — пока не поздно.",
    desc: "Бывший лидер крепости, жаждущий вернуть её былую славу.",
    image: "Images/npc/commander.jpg"
  }
};

// Данные квестов (без Мудрой жабы)
const questData = {
  "Староста Лем": {
    title: "Пропавший гонец",
    desc: "Найди вестника в лесу",
    condition: "Найти и вернуть гонца живым",
    reward: "20 монет, +доверие деревни"
  },
  "Кузнец Бран": {
    title: "Угли для кузни",
    desc: "Добыть уголь в шахте",
    condition: "Принести 5 единиц угля",
    reward: "Прочный меч или броня"
  },
  "Охотница Элира": {
    title: "Тропами зверя",
    desc: "Убей вурдалака в лесу",
    condition: "Победить вурдалака в лесу",
    reward: "Охотничий плащ (+ловкость)"
  },
  "Рыбак Нор": {
    title: "Большая рыба",
    desc: "Поймай редкого сомавра",
    condition: "Поймать и принести сомавра",
    reward: "Серебряный крючок (+удача в рыбалке)"
  },
  "Страж Ролан": {
    title: "Тихая башня",
    desc: "Проверь странные звуки ночью",
    condition: "Выследить и устранить нарушителя",
    reward: "Доспех стража (+защита)"
  },
  "Старец Вейн": {
    title: "Пыль времён",
    desc: "Найди древнюю книгу в руинах",
    condition: "Принести книгу из старого храма",
    reward: "Свиток заклинания или мана-камень"
  },
  "Скиталец Кайр": {
    title: "Следы теней",
    desc: "Расследуй исчезновения на дороге",
    condition: "Победить теневого врага на тракте",
    reward: "Плащ теней (+уклонение)"
  },
  "Комендант Рейн": {
    title: "Запах мятежа